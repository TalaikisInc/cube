worker_processes 1;

events { worker_connections 1024; }

http {
    sendfile on;
    server_tokens off;
    access_log off;

    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    # add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://ssl.google-analytics.com; img-src 'self' https://ssl.google-analytics.com https://s-static.ak.facebook.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://themes.googleusercontent.com; frame-src https://www.facebook.com https://s-static.ak.facebook.com; object-src 'none'";
    add_header X-Download-Options noopen;
    add_header Referrer-Policy no-referrer;

    client_body_buffer_size     10K;
    client_header_buffer_size   1k;
    client_max_body_size        8m;
    large_client_header_buffers 2 1k;
    client_body_timeout         12;
    client_header_timeout       12;
    keepalive_timeout           5;
    send_timeout                10;

    upstream identiform {
        server 127.0.0.1:3000 fail_timeout=0;
    }

    upstream mail {
        server 127.0.0.1:3001 fail_timeout=0;
    }

    upstream blueblood {
        server 127.0.0.1:3002 fail_timeout=0;
    }

    upstream sales {
        server 127.0.0.1:3003 fail_timeout=0;
    }

    upstream ipfs {
        server 127.0.0.1:3004 fail_timeout=0;
    }

    upstream act {
        server 127.0.0.1:3005 fail_timeout=0;
    }

    upstream nakamoto {
        server 127.0.0.1:3006 fail_timeout=0;
    }

    upstream talaikis {
        server 127.0.0.1:3007 fail_timeout=0;
    }

    upstream ufunc {
        server 127.0.0.1:3008 fail_timeout=0;
    }

    upstream estateManagement {
        server 127.0.0.1:3009 fail_timeout=0;
    }

    upstream upload {
        server 127.0.0.1:3010 fail_timeout=0;
    }

    server {
        listen 80;
        listen [::]:80;

        server_name blockchain.talaikis.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name estateexperts.co.uk;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name www.estateexperts.co.uk;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name mail.talaikis.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name blueblood.ltd;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name www.blueblood.ltd;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name sales.talaikis.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name ipfs.talaikis.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name act.talaikis.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name nakamotowallet.org;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name www.nakamotowallet.org;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name talaikis.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name www.talaikis.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name ufunc.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name www.ufunc.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 80;
        listen [::]:80;

        server_name upload.talaikis.com;

        location ^~ /.well-known {
            allow all;
            auth_basic off;
            alias /var/www/letsencrypt;
        }

        location / {
            return 301 https://$server_name$request_uri;
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name blockchain.talaikis.com;

        ssl_certificate /etc/letsencrypt/live/blockchain.talaikis.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/blockchain.talaikis.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://identiform;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name estateexperts.co.uk;

        ssl_certificate /etc/letsencrypt/live/estateexperts.co.uk/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/estateexperts.co.uk/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://estateManagement;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name www.estateexperts.co.uk;

        ssl_certificate /etc/letsencrypt/live/www.estateexperts.co.uk/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/www.estateexperts.co.uk/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://estateManagement;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name ipfs.talaikis.com;

        ssl_certificate /etc/letsencrypt/live/ipfs.talaikis.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/ipfs.talaikis.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://ipfs;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name act.talaikis.com;

        ssl_certificate /etc/letsencrypt/live/act.talaikis.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/act.talaikis.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://act;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name sales.talaikis.com;

        ssl_certificate /etc/letsencrypt/live/sales.talaikis.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/sales.talaikis.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://sales;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name talaikis.com;

        ssl_certificate /etc/letsencrypt/live/talaikis.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/talaikis.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://talaikis;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name www.talaikis.com;

        ssl_certificate /etc/letsencrypt/live/www.talaikis.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/www.talaikis.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://talaikis;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name ufunc.com;

        ssl_certificate /etc/letsencrypt/live/ufunc.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/ufunc.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://ufunc;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name www.ufunc.com;

        ssl_certificate /etc/letsencrypt/live/www.ufunc.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/www.ufunc.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://ufunc;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name nakamotowallet.org;

        ssl_certificate /etc/letsencrypt/live/nakamotowallet.org/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/nakamotowallet.org/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://nakamoto;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name www.nakamotowallet.org;

        ssl_certificate /etc/letsencrypt/live/www.nakamotowallet.org/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/www.nakamotowallet.org/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://nakamoto;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name mail.talaikis.com;

        ssl_certificate /etc/letsencrypt/live/mail.talaikis.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/mail.talaikis.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://mail;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name blueblood.ltd;

        ssl_certificate /etc/letsencrypt/live/blueblood.ltd/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/blueblood.ltd/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://blueblood;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name www.blueblood.ltd;

        ssl_certificate /etc/letsencrypt/live/www.blueblood.ltd/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/www.blueblood.ltd/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://blueblood;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }

    server {
        listen 443 ssl http2;
        listen [::]:443 ssl http2;

        server_name upload.talaikis.com;

        ssl_certificate /etc/letsencrypt/live/upload.talaikis.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/upload.talaikis.com/privkey.pem;

        ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH RSA+AESGCM RSA+AES !RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
        ssl_prefer_server_ciphers on;
        ssl_dhparam /etc/ssl/private/dhparam.pem;

        location / {
            proxy_pass http://upload;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $server_name;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;

            add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
        }
    }
}
